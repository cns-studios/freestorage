<!DOCTYPE html>
<html>
<head>
    <title>FreeStorage // Web</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="loading-overlay"><div class="loader"></div></div>

    <!-- Custom Modal Overlay -->
    <div id="custom-modal-overlay">
        <div class="modal-card">
            <h3 id="modal-title" class="modal-title"></h3>
            <p id="modal-message" class="modal-message"></p>
            <input type="text" id="modal-input" style="display: none;" placeholder="">
            <div class="modal-actions">
                <button id="modal-cancel" class="secondary modal-btn"></button>
                <button id="modal-confirm" class="modal-btn"></button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <span>&copy; 2026 FreeStorage</span>
        <a href="/tos.html">Terms of Service</a>
        <a href="/policy.html">Privacy Policy</a>
    </footer>

    <div id="auth-screen">
        <div class="auth-card">
            <div class="auth-header">
                <h2>FreeStorage // Web</h2>
                <div class="subtitle">View and download your files</div>
            </div>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <p id="auth-msg" style="color: var(--danger-color); font-size: 0.75rem; text-align: center;"></p>
            <button onclick="login()">Log In</button>
            <button class="secondary" onclick="window.location.href='/download-app'">Download App to Register</button>
        </div>
    </div>

    <div id="app-screen">
        <div class="sidebar">
            <div class="logo">FreeStorage</div>
            <div class="nav-item active" onclick="switchTab('dashboard')">Overview</div>
            <div class="nav-item" onclick="switchTab('files')">Files</div>
            <div class="nav-item" onclick="switchTab('settings')">Settings</div>
            <div style="flex-grow: 1;"></div>
            <div class="nav-item" onclick="logout()" style="color: var(--danger-color);">Log Out</div>
        </div>
        <div class="main-content">
            <div style="display: flex; justify-content: flex-end; margin-bottom: 2rem;">
                <button class="secondary" style="width: auto; padding: 8px 16px; border-color: var(--danger-color); color: var(--danger-color);" onclick="logout()">Log Out</button>
            </div>
            <div id="dashboard" class="tab-content active">
                <h1>Overview</h1>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Storage Used</div>
                        <div class="stat-value" id="storage-used">0 GB</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Limit</div>
                        <div class="stat-value" id="storage-limit">10 GB</div>
                    </div>
                </div>
                <div style="padding: 1.5rem; background: var(--hover-bg); border-radius: 8px; border: 1px solid var(--border-color); color: var(--text-secondary);">
                    <strong>Web Mode:</strong> You are in read-only mode. To upload files or earn storage rewards, please use the desktop application.
                </div>
            </div>

            <div id="files" class="tab-content" style="display:none">
                <h1>Files</h1>
                <div style="margin-bottom: 1rem; display: flex; gap: 1rem;">
                    <input type="text" id="file-search" placeholder="Search files..." oninput="renderFiles()" style="flex-grow: 1; margin: 0;">
                </div>
                <table class="file-table">
                    <thead><tr><th>Name</th><th>Size</th><th style="text-align:right">Action</th></tr></thead>
                    <tbody id="file-list-body"></tbody>
                </table>
            </div>

            <div id="settings" class="tab-content" style="display:none">
                <h1>Settings</h1>
                <div class="auth-card" style="max-width: 100%; margin: 0; box-shadow: none; border: 1px solid var(--border-color);">
                    <h3>Account Security</h3>
                    <p class="subtitle">Update your credentials. Leave blank to keep current.</p>
                    <input type="text" id="new-username" placeholder="New Username">
                    <input type="password" id="new-password" placeholder="New Password">
                    <button onclick="updateAccount()">Update Account</button>
                    <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color); display: flex; flex-direction: column; gap: 10px;">
                        <button class="secondary danger" onclick="deleteAllFiles()">Delete All Files</button>
                        <button class="secondary danger" onclick="deleteAccount()">Delete Entire Account</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>